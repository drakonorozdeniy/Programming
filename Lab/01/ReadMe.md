<p  align="center">МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ РОССИЙСКОЙ ФЕДЕРАЦИИ<br>
Федеральное государственное автономное образовательное учреждение высшего образования<br>
"КРЫМСКИЙ ФЕДЕРАЛЬНЫЙ УНИВЕРСИТЕТ им. В. И. ВЕРНАДСКОГО"<br>
ФИЗИКО-ТЕХНИЧЕСКИЙ ИНСТИТУТ<br>
Кафедра компьютерной инженерии и моделирования</p>
<br>
<h3  align="center">Отчёт по лабораторной работе № 1<br> по дисциплине "Программирование"</h3>
<br><br>
<p>студента 1 курса группы ПИ-б-о-201(2)<br>
Карев Даниил Николаевич<br>
<<<<<<< HEAD
направления подготовки 09.03.04 "Программная инженерия"</p>
=======
направления подготовки 09.03.0X "Программная инженерия"</p>
>>>>>>> b31ebd05c4de1558e422e4bf32ea71eae71402dc
<br><br>
<table>
<tr><td>Научный руководитель<br> старший преподаватель кафедры<br> компьютерной инженерии и моделирования</td>
<td>(оценка)</td>
<td>Чабанов В.В.</td>
</tr>
</table>
<br><br>
<p  align="center">Симферополь, 2020</p>
<hr>

Цель:
-----------
1. Закрепить навыки разработки многофайловыx приложений;
2. Изучить способы работы с API web-сервиса;
3. Изучить процесс сериализации/десериализации данных в/из json;
4. Получить базовое представление о сетевом взаимодействии приложений;
Изучить способы работы с API web-сервиса;

Постановка задачи
--------------------------
Разработать сервис предоставляющий данные о погоде в городе Симферополе на момент запроса. В качестве источника данных о погоде используйте: [http://openweathermap.org/](http://openweathermap.org/). В состав сервиса входит: серверное приложение на языке С++ и клиентское приложение на языке Python
Серверное приложение (далее Сервер) предназначенное для обслуживания клиентских приложений и минимизации количества запросов к сервису _openweathermap.org_. Сервер должен обеспечивать возможность получения данных в формате JSON и виде _html_ виджета (для вставки виджета на страницу будет использоваться _[iframe](https://habr.com/ru/post/488516/)_).
Клиентское приложение должно иметь графический интерфейс отображающий сведения о погоде и возможность обновления данных по требованию пользователя.

<<<<<<< HEAD
Выполнение работы:
--------------------------

Создание серверного приложения
--------------


**1.** Для начала я решил изучить Структуру http-запроса, какие элементы туда входят и с чем мне нужно будет работать. C работой мне помогла разобраться картинка, а так же видео фрагменты предоставленные преподавателем. Я узнал что такое сетевой порт , путь к ресурсу , якорь и т.д .
![](https://vladimirchabanov.github.io/Lab1_fils/img/request.png)
<p  align="center">Рис. 1. Структура http-запроса </p>

**2.** Далее я приступил к работе с сервисом сервисом openweathermap.org. Я сгенерировал свой API key, использовал шаблон http://api.openweathermap.org/data/2.5/onecall? и такие параметры, как: lat(ширина), lon(долгота) - координаты города, exclude - исключение(исключаем всё, кроме почасового измерения),lang - установление языка(в нашем случае приравниваем к ru(русский)), units - устанавливаем в чём измеряем скорость ветра и температуру(metric - температура в Цельсиях, скорость ветра - м/с), 
а затем в переменную appid вставляю API key. Таким образом, я создал запрос:http://api.openweathermap.org/data/2.5/onecall?lat=44.952116&lon=34.102411&exclude=current,minutely,daily,alerts&units=metric&lang=ru&appid=2d3977d669c689c7762d22177616c5f4.
<p  align="center"><img  src=./image/№2.png></p>
<p  align="center">Рис. 2. Ответ сервера на запрос. </p>
=======
Выполнение работы
--------------------------
**1.** Для начала я решил изучить Структура http-запроса, какие элементы туда входят и с чем мне нужно будет работать. C работой мне помогла разобраться картинка, а так же видео фрагменты предоставленные преподавателем. Я узнал что такое сетевой порт , путь к ресурсу , якорь и т.д .
![](https://vladimirchabanov.github.io/Lab1_fils/img/request.png)
<p  align="center">Рис. 1. Структура http-запроса </p>

**2.** Далее я приступил к работе с сервисом сервисом openweathermap.org. Я сгенерировал свой API key.
<p  align="center"><img  src=./image/№1.png></p>
<p  align="center">Рис. 2. API key .</p>

Я разобрался как делать запрос, как получить ответ в градусах Цельсия и на русском языке.
<p  align="center"><img  src=./image/№2.png></p>
<p  align="center">Рис. 3. Ответ сервера на запрос. </p>
>>>>>>> b31ebd05c4de1558e422e4bf32ea71eae71402dc

Для полного понимания ответа его удобнее изучать в виде дерева, например при помощи [JSON Viewer](https://codebeautify.org/jsonviewer).

<p  align="center"><img  src=./image/№3.png></p>
<<<<<<< HEAD
<p  align="center">Рис. 3. JSON Viewer. </p>

**3.** Работа с сервисом worldtimeapi.org. Мне удалось получить запрос для времени в Симферополе и изучить формат ответа. Cгенерирую запрос на сайте https://worldtimeapi.org. Для этого прописываю параметр timezone, далее указываю часть света (Europe), а затем город (Simferopol). Сам запрос: https://worldtimeapi.org/api/timezone/Europe/Simferopol.
<p  align="center"><img  src=./image/№2.png></p>
<p  align="center">Рис.4. Ответ сервера на запрос. </p>
Изучить формат вывода я смог через JSON Viewer 
<p  align="center"><img  src=./image/№5.png></p>
<p  align="center">Рис. 5. JSON Viewer. </p>

**4.** Далее я изучил руководство преподавателя, ознакомился с полезными видео материалами и ссылками.

**5.** Приступил к выполнению основной части лабораторной работы. Для начала скачиваю из репозитория библиотеку cpp_httplib, которая понадобится нам для работы с сетью. Также из того же репозитория скачиваем библиотеку nlohmann:json, которая понадобится для работы с json. Создаю консольное приложение С++, перехожу в папку с главным проектом и создаю папку include, куда распаковываю архивы, которые содержат библиотеки. Теперь подключаю все необходимые библиотеки. 
<p  align="center"><img  src=./image/№14.png></p>
<p  align="center">Рис. 6. Подключение нужных библиотек </p>

Теперь создадим функцию типа int  для http://worldtimeapi.org  и string для  получения данных от сервисов http://openweathermap.org/ и http://worldtimeapi.org. Посылаем им get-запросы, возвращаем в переменную. 
<p  align="center"><img  src=./image/№15.png></p>
<p  align="center">Рис. 7. Отправка get-запросов </p>


 Затем в цикле обноляем кэш. Если в нём содержится информация на 1 час больше, то кэш не обновляем. Если в кэше нет данных, устарел или запрос не делали, то кэш обновляется.


<p  align="center"><img  src=./image/№18.png></p>
<p  align="center">Рис. 8. Обновление кеша для "/" </p>

Выводим на сайт: http://localhost:3000/ После этого программа ищет строки в html-коде и заменяет их на строки, которые нам выдает сервер.

<p  align="center"><img  src=./image/№16.png></p>
<p  align="center">Рис.9. Замена строк в html. </p>

Для вормирования запросов для "/raw" я использовал теже функции что и для "/"(рис.8)

Также проверяем кэш в if . Если в кэше нет данных, устарел или запрос не делали, то кэш обновляется и высвечивается информация о погоде на начало следующего часа. Затем кидаем в переменную значение описания и температуры и выводим на сайт: http://localhost:3000/raw

<p  align="center"><img  src=./image/№17.png></p>
<p  align="center">Рис.10. Проверка кэша и загрузка в переменные занчения описания и температуры.. </p>

Создаём сервер. Затем для основного используем первую функцию, для /raw используем вторую функцию. Указываем, на каком хосте работает.Переходим на сайты и проверяем работу сервера.
<p  align="center"><img  src=./image/№19.png></p>
<p  align="center">Рис. 11. Готовый сервер</p>

**Создание клиентского приложения**
-----------------------

Графический интерфейс я реализовал с помощью Tkinter. В консоле, с помощью команды pip install requests(если при установке Pythona напротив PYTH вы не поставили галочку, то придётся решать эту проблемы собственноручно) устанавливаем модуль requetsts, который нам понадобится для работы с сетью. А для работы с json пользуемся модулем json. Теперь создаём функцию, в которую помещаем подключение к http://localhost:3000/raw, куда мы недавно выводили информацию о температуре и погоде.
<p  align="center"><img  src=./image/№.png></p>
<p  align="center">Рис. 12. Подключение модулей и создание функции, которая берёт данные из сервера</p>

Затем  класс виджетов Label для отображения текста, задаём цвет, высоту, ширину. Область, которую мы обозначили в root.geometry, мы разделили на три части. Также задаём положение каждому Label.
<p  align="center"><img  src=./image/№21.png></p>
<p  align="center">Рис. 13. Виджеты Label</p>

Производим запуск  клиентского приложения.
<p  align="center"><img  src=./image/№12.png></p>
<p  align="center">Рис. 14.Готовое клиенсткое приложение</p>

**Вывод:**
Через создание соревера и клиентского приложения должен пройти каждый программист, потому что все люди взаимодействуют с приложениями и необходимо понимать как они работают, отуда берут данные. В данной лабораторной работе я закрепил навыки разработки многофайловых приложений, изучил способы работы с API web-сервиса,процесс сериализации/десериализации данных в/из json, получил базовое представление о сетевом взаимодействии приложения.
Разработал сервис, который предоставляет данные о погоде в городе Симферополь на момент запроса.Разработал для клиентского приложения графический интерфейс, отображающий данные о погоде и возможность объявления их по требованию пользователя.
=======
<p  align="center">Рис. 4. JSON Viewer. </p>

**3.** Работе с сервисом worldtimeapi.org. Мне удалось получить запрос для времени в Симферополе и изучить формат ответа. 
<p  align="center"><img  src=./image/№2.png></p>
<p  align="center">Рис.5. Ответ сервера на запрос. </p>
Изучить формат вывода я смог через JSON Viewer 
<p  align="center"><img  src=./image/№5.png></p>
<p  align="center">Рис. 6. JSON Viewer. </p>

**4.** Далее я изучил руководство преподавателя, ознакомился с полезными видео материалами и ссылками.

**5.** Приступил к выполнению основной части лабораторной работы :
Полный код серверного приложения у меня состоит из 129 строк : 
<p  align="center"><img  src=./image/№6.png></p>
<p  align="center"><img  src=./image/№7.png></p>
<p  align="center"><img  src=./image/№8.png></p>
<p  align="center"><img  src=./image/№9.png></p>

<p  align="center"><img  src=./image/№10.png></p>
<p  align="center">Рис. 7. Код серверного приложения. </p>

В клиентском коде я не использовал много строк : 
<p  align="center"><img  src=./image/№11.1.png></p>
<p  align="center">Рис. 8. Код клиентского приложения </p>

В клиентском приложении у меня получилась вот такая программа : 
<p  align="center"><img  src=./image/№12.png></p>
<p  align="center">Рис. 9. Клиентское приложение </p>

В серверном приложении вывод был такой:
<p  align="center"><img  src=./image/№13.png></p>
<p  align="center">Рис. 10. Серверное приложение </p>
Графический интерфейс я реализовал с помощью Tkinter. В консоле, с помощью команды pip install requests(если прм установке Pythona напротив PYTH вы не поставили галочку, то придётся решать эту проблемы собственноручно)у	станавливаем модуль requetsts, который нам понадобится для работы с сетью. А для работы с json пользуемся модулем json. 
Теперь создаём функцию, в которую помещаем подключение к http://localhost:3000/raw, куда мы недавно выводили информацию о температуре и погоде.
>>>>>>> b31ebd05c4de1558e422e4bf32ea71eae71402dc

